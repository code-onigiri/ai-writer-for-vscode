# AI Writer VSCode Extension - GUI機能ビジュアルガイド

このドキュメントでは、新しく実装されたGUI機能の視覚的な説明を提供します。

## 🎨 新規実装されたUI機能

### 1. 進行状況パネル (Progress Panel)

#### 概要
生成サイクル（生成→批判→考察→質問→再生成）をリアルタイムで可視化するWebviewパネルです。

#### 表示タイミング
- `AI Writer: Start Outline Generation` コマンド実行時
- `AI Writer: Start Draft Generation` コマンド実行時

#### UI構成

```
┌─────────────────────────────────────────────────────────┐
│ AI Writer Progress                                      │
│ ┌─────────────────────────────────────────────────┐    │
│ │ [OUTLINE] Session: session-123456                │    │
│ └─────────────────────────────────────────────────┘    │
│                                                          │
│ ┌─────────────────────────────────────────────────┐    │
│ │ ✅ Generate                    10:30:15          │    │
│ │ ┌─────────────────────────────────────────┐     │    │
│ │ │ Outline generated successfully          │     │    │
│ │ │                                          │     │    │
│ │ │ Section 1: Introduction                 │     │    │
│ │ │ - Key point A                           │     │    │
│ │ │ - Key point B                           │     │    │
│ │ └─────────────────────────────────────────┘     │    │
│ │                                    [Rerun]       │    │
│ └─────────────────────────────────────────────────┘    │
│                                                          │
│ ┌─────────────────────────────────────────────────┐    │
│ │ 🔄 Critique                    10:30:18          │    │
│ │ ┌─────────────────────────────────────────┐     │    │
│ │ │ Analyzing outline structure...          │     │    │
│ │ └─────────────────────────────────────────┘     │    │
│ └─────────────────────────────────────────────────┘    │
│                                                          │
│                                    [Streaming... ●]      │
└─────────────────────────────────────────────────────────┘
```

#### ステップの状態

1. **Pending** (・) - 待機中
2. **Running** (🔄 スピナー) - 実行中
3. **Completed** (✅) - 完了
4. **Error** (❌) - エラー

#### インタラクション

- **Rerunボタン**: 完了したステップを再実行（現在は表示のみ）
- **コンテンツエリア**: 生成されたコンテンツを表示
- **ストリーミング**: リアルタイムでコンテンツが追加される様子を確認

### 2. セッション一覧 (Sessions TreeView)

#### 場所
サイドバーの「AI Writer」アイコン → 「Sessions」ビュー

#### 表示内容

```
AI WRITER
├─ Sessions
│  ├─ [Outline] Write an article about AI...  2024/01/15 10:30
│  ├─ [Draft] outline-123                     2024/01/15 09:15  
│  └─ [Outline] Machine learning basics       2024/01/14 15:20
└─ Templates
   └─ ...
```

#### 機能
- **クリック**: セッションのプレビューを表示（Markdownドキュメント）
- **アイコン**: 
  - 📚 (book) - Draftセッション
  - 🏗️ (structure) - Outlineセッション
- **説明**: 最終更新日時を表示
- **ツールチップ**: 詳細情報（セッションID、ステータス、テンプレート、ペルソナ）

### 3. テンプレート一覧 (Templates TreeView)

#### 場所
サイドバーの「AI Writer」アイコン → 「Templates」ビュー

#### 表示内容

```
AI WRITER
├─ Sessions
│  └─ ...
└─ Templates
   ├─ 📁 Blog Post Template                   3 points
   │  ├─ 🔹 Introduction                     Priority 1
   │  ├─ 🔹 Main Content                     Priority 2
   │  └─ 🔹 Conclusion                       Priority 3
   └─ 📁 Technical Documentation              5 points
      └─ ...
```

#### 機能
- **テンプレートをクリック**: 詳細ビューに表示
- **ポイントを展開**: 各ポイントの優先度を確認
- **ポイントにマウスオーバー**: 指示内容をツールチップで表示

### 4. テンプレート詳細 (Template Details WebviewView)

#### 場所
サイドバーの「AI Writer」アイコン → 「Template Details」ビュー

#### 表示内容

```
┌──────────────────────────────────────────┐
│ AI Writer Template Details               │
├──────────────────────────────────────────┤
│ Blog Post Template                       │
│ Template ID: template-123                │
│ Updated: 2024/01/15 10:30:00             │
│                                          │
│ Persona Hints:                           │
│ • Professional tone                      │
│ • General audience                       │
│                                          │
│ ┌────────────────────────────────────┐  │
│ │ Introduction          Priority 1   │  │
│ │ Write an engaging opening that...  │  │
│ └────────────────────────────────────┘  │
│                                          │
│ ┌────────────────────────────────────┐  │
│ │ Main Content          Priority 2   │  │
│ │ Provide detailed explanations...   │  │
│ └────────────────────────────────────┘  │
│                                          │
│ ┌────────────────────────────────────┐  │
│ │ Conclusion            Priority 3   │  │
│ │ Summarize key points and...        │  │
│ └────────────────────────────────────┘  │
└──────────────────────────────────────────┘
```

#### 機能
- **自動表示**: テンプレート一覧からテンプレートを選択すると表示
- **ポイント表示**: 各ポイントの指示内容と優先度を確認
- **スタイリング**: VSCodeテーマに自動適応

### 5. ステータスバー

#### 表示位置
VSCodeウィンドウ下部の左側

#### 表示内容

```
┌─────────────────────────────────────────────────────────┐
│ [●] AI Writer: Outline ready  Session 123...           │
└─────────────────────────────────────────────────────────┘
```

#### 状態
- **アイドル**: `AI Writer idle` (非表示)
- **実行中**: `[🔄] AI Writer: Outline…` (スピナーアニメーション)
- **完了**: `[✅] AI Writer: Outline ready`
- **エラー**: `[❌] AI Writer: Outline failed`

#### インタラクション
- **クリック**: 最新セッションのプレビューを開く（予定）
- **ツールチップ**: セッション詳細を表示

## 🎬 使用フロー例

### シナリオ: アウトライン生成

1. **コマンド実行**
   ```
   Cmd/Ctrl+Shift+P → "AI Writer: Start Outline Generation"
   ```

2. **アイデア入力**
   ```
   入力プロンプト: "AIと教育についての記事"
   ```

3. **進行状況パネル自動表示**
   - ビューが自動的に表示される
   - "Generate" ステップが実行中として表示される
   - ストリーミングインジケーターが点滅

4. **リアルタイム更新**
   - コンテンツがリアルタイムで追加される
   - ステップが完了すると✅マークに変わる
   - 次のステップ（Critique）が自動的に開始

5. **セッション追跡**
   - セッション一覧に新しいエントリが追加される
   - ステータスバーが更新される
   - セッションをクリックしてプレビュー可能

## 🎨 デザインの特徴

### カラーテーマ対応
- VSCodeのテーマカラー変数を使用
- ライトモード・ダークモード自動対応
- アクセシビリティ考慮

### アニメーション
- **スピナー**: 実行中のステップ
- **パルス**: ストリーミングインジケーター
- **スムーズな遷移**: ステップ状態の変化

### レスポンシブ
- パネル幅に応じた自動調整
- 長いコンテンツのスクロール対応
- コンパクトな表示オプション

## 🔧 デバッグ方法

### 進行状況パネルの表示確認

1. VSCodeでプロジェクトを開く
2. F5を押してデバッグモード起動
3. Extension Development Hostで
   ```
   Cmd/Ctrl+Shift+P → "AI Writer: Start Outline Generation"
   ```
4. パネルが表示されることを確認

### DevToolsでの確認

Webviewの内容を確認するには：
1. `Cmd/Ctrl+Shift+P`
2. "Developer: Open Webview Developer Tools"
3. Webviewを選択
4. Console/Elementsタブで確認

## 📝 注意事項

### 現在の制限
- ストリーミング表示は**デモンストレーション**です
- Orchestratorからの実際のイベントは未統合
- Rerunボタンは表示のみ（機能は未実装）

### 今後の改善
- 実際のストリーミング応答の統合
- Rerun/Approve/Reject機能の実装
- エラーリカバリーUI
- プログレス保存と復元
